---
title: файл конфігурації rsync
author: tianci li
update: 2021-11-04
---

# /etc/rsyncd.conf

У попередній статті [rsync demo 02 ](03_rsync_demo02.md)ми представили деякі основні параметри. Ця стаття доповнює інші параметри.

| Параметри                           | Опис                                                                                                                                                                                                                                                                                                                                     |
| ----------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| fake super = yes                    | yes означає, що вам не потрібно, щоб демон запускався від імені користувача root для збереження всіх атрибутів файлу.                                                                                                                                                                                                                    |
| uid =                               | ідентифікатор користувача                                                                                                                                                                                                                                                                                                                |
| gid =                               | Два параметри використовуються для визначення користувача та групи, які використовуються для передачі файлів під час запуску демона rsync від імені користувача root. За замовчуванням ніхто                                                                                                                                             |
| use chroot = yes                    | Чи потрібно заблокувати кореневий каталог перед передачею, так, так, ні, ні. З метою підвищення безпеки rsync за замовчуванням має значення «так».                                                                                                                                                                                       |
| max connections = 4                 | Максимально дозволена кількість підключень, значення за замовчуванням 0, що означає відсутність обмежень                                                                                                                                                                                                                                 |
| lock file = /var/run/rsyncd.lock    | Зазначений файл блокування, пов’язаний із параметром «max connections»                                                                                                                                                                                                                                                                   |
| exclude = lost+found/               | Виключити каталоги, які не потрібно переносити                                                                                                                                                                                                                                                                                           |
| transfer logging = yes              | Чи ввімкнути ftp-подібний формат журналу для запису завантажень і завантажень rsync                                                                                                                                                                                                                                                      |
| timeout = 900                       | Визначте період очікування. Якщо дані не передано протягом зазначеного часу, rsync завершить роботу безпосередньо. Одиницею вимірювання є секунди, значення за замовчуванням 0 означає, що тайм-аут ніколи не буде                                                                                                                       |
| ignore nonreadable = yes            | Чи ігнорувати файли, до яких користувач не має прав доступу                                                                                                                                                                                                                                                                              |
| motd file = /etc/rsyncd/rsyncd.motd | Використовується для вказівки шляху до файлу повідомлення. По замовчуванню, тут відсутній motd файл. Це вітальне повідомлення, яке відображається під час входу користувача.                                                                                                                                                             |
| hosts allow = 10.1.1.1/24           | Використовується для вказівки, до якої IP-адреси або сегмента мережі клієнтам дозволено доступ. Ви можете заповнити Ip-адресу, сегмент мережі, ім’я хоста, хост у домені та розділити їх пробілами. Дозволити всім доступ за замовчуванням                                                                                               |
| hosts deny = 10.1.1.20              | Доступ до якого Ip-адреси чи сегмента мережі, указаним користувачем, заборонено. Якщо хости дозволять і хости заборонять мають однаковий відповідний результат, клієнт зрештою не зможе отримати доступ. Якщо адресу клієнта немає ні в дозволі, ні в забороні хостів, клієнту дозволено доступ. За замовчуванням такого параметра немає |
| auth users = li                     | Увімкнути віртуальних користувачів, кілька користувачів відокремлюються комами в англійському стані                                                                                                                                                                                                                                      |
| syslog facility = daemon            | Визначте рівень системного журналу. Ці значення можна заповнити: auth, authpriv, cron, daemon, ftp, kern, lpr, mail, news, security, syslog, user, uucp, local0, local1, local2 local3, local4, local5, local6 і local7. Типовим по замовчуванню значенням є daemon                                                                      |

## Рекомендована конфігурація

```ini title="/etc/rsyncd.conf"
uid = nobody
gid = nobody
address = 192.168.100.4
use chroot = yes
max connections = 10
syslog facility = daemon
pid file = /var/run/rsyncd.pid
log file = /var/log/rsyncd.log
lock file = /var/run/rsyncd.lock
[file]
  comment = rsync
  path = /rsync/
  read only = no
  dont compress = *.gz *.bz2 *.zip
  auth users = li
  secrets file = /etc/rsyncd users.db
```
