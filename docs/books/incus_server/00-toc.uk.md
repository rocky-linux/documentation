---
title: Вступ
author: Steven Spencer
contributors: Ezequiel Bruni, Ganna Zhyrnova
tested_with: 9.4
tags:
  - lxd
  - incus
  - enterprise
---

# Створення сервера Incus

## Статус Incus на Rocky Linux

Майже рік тому в списку розсилки lxc-users з’явилося таке оголошення:

> Компанія Canonical, творець і головний учасник проекту LXD, вирішила, що після більш ніж 8 років роботи в спільноті Linux Containers цей проект тепер краще обслуговувати безпосередньо в рамках власного набору проектів Canonical.

Одним із вирішальних факторів стала відставка деяких провідних розробників LXD. Потім ці розробники розгалужували LXD на Incus, оголосивши про розгалуження в серпні 2023 року. Версія випуску (0.1) вийшла в жовтні 2023 року, і з тих пір розробники швидко створили цю версію, випускаючи поетапно до 0.7 (у березні 2024 року). Випуск версії довгострокової підтримки (6.0 LTS) відбувся після випуску 0.7. Поточна версія 6.5.

Вважалося, що протягом усього процесу Canonical продовжувала підтримувати посилання на зображення контейнерів, надані Linux Containers. Однак [зміна ліцензії](https://stgraber.org/2023/12/12/lxd-now-re-licensed-and-under-a-cla/) унеможливила Linux Containers продовжувати пропонувати контейнер зображення в межах LXD. Це означає, що LXD матиме зображення контейнерів, але вони не будуть такими, якими ви могли б очікувати. Контейнери Linux продовжують розміщувати та підтримувати свої зображення, якщо ви використовуєте Incus.

Цей документ є перетворенням [книги LXD](../lxd_server/00-toc.md) на Incus. Після створення репозиторію співкерівником інфраструктури проекту Rocky Linux [Нілом Хенлоном](https://wiki.rockylinux.org/team/infrastructure/), у вас є можливість інсталювати Incus до його включення в EPEL (Додатково Пакети для репозиторію Enterprise Linux).

!!! warning "Сервер Incus недоступний на Rocky Linux 8"

```
Інсталяція сервера Incus доступна лише для Rocky Linux 9.x і наразі тестується на Rocky Linux 9.4. Якщо вам потрібно щось, що працює на Rocky Linux 8.x, скористайтеся [попередньо згаданою процедурою LXD](../lxd_server/00-toc.md).
```

## Вступ

Incus найкраще описано на [офіційному веб-сайті](https://linuxcontainers.org/incus/), але уявіть його як контейнерну систему, яка надає переваги віртуальних серверів у контейнері.

Він дуже потужний, і за належного апаратного забезпечення та налаштування можна створити багато екземплярів сервера на одній частині апаратного забезпечення. Якщо ви об’єднаєте це з сервером знімків, у вас також буде набір контейнерів, які можна розкрутити майже негайно, якщо ваш основний сервер вийде з ладу.

!!! warning "Це не резервна копія"

```
Ви не повинні сприймати це як традиційне резервне копіювання. Вам все ще потрібна звичайна система резервного копіювання, наприклад [rsnapshot](../../guides/backup/rsnapshot_backup.md).
```

Крива навчання Incus може бути крутою, але ця книга спробує дати вам знання, які допоможуть вам розгорнути та використовувати Incus у Rocky Linux.

Для тих, хто хоче використовувати Incus як лабораторне середовище на своїх ноутбуках або робочих станціях, див. [Додаток A: Налаштування робочої станції] (30-appendix_a.md).

## Передумови та припущення

- Один сервер Rocky Linux 9, гарно налаштований. Розгляньте окремий жорсткий диск для дискового простору ZFS у робочому середовищі (це потрібно зробити, якщо ви використовуєте ZFS). І так, ми припускаємо, що це чистий сервер, а не VPS.
- Це слід вважати розширеною темою, але ми зробили все можливе, щоб зробити її максимально зрозумілою для всіх. Тим не менш, знання кількох основних речей про керування контейнерами займе у вас довгий шлях. Знання кількох базових речей про керування контейнерами значно допоможе.
- Ви маєте добре володіти командним рядком на своїй машині (машинах) і вільно володіти редактором командного рядка. (Використовуємо _vi_ в цих прикладах, але ви можете використовувати свій улюблений редактор.)
- Для більшості цих процесів вам потрібно буде бути непривілейованим користувачем. Для початкових кроків налаштування вам потрібно буде бути користувачем root або вміти `sudo`, щоб стати ним. У цих розділах ми припускаємо, що ваш непривілейований користувач є "incusadmin". Вам доведеться створити цей обліковий запис користувача пізніше в процесі.
- Для ZFS переконайтеся, що безпечне завантаження UEFI НЕ ввімкнено. В іншому випадку вам доведеться підписати модуль ZFS, щоб змусити його завантажити.
- Здебільшого ми використовуємо контейнери на основі Rocky Linux.

!!! info

```
Автор включає методологію використання файлової системи ZFS. Зверніть увагу, що проект Incus рекомендує BTRFS як файлову систему для сервера Incus. (ZFS все ще є опцією файлової системи.) Проте BTRFS взагалі недоступний у Rocky Linux 9.4. Поки він не буде санкціонований апстрімом і не буде випущено там, ваш єдиний вихід — використовувати ZFS або іншу включену файлову систему. Щоб дізнатися більше про параметри файлової системи Incus, перегляньте [офіційний документ проекту тут.](https://linuxcontainers.org/incus/docs/main/reference/storage_dir/)  
```

## Короткий Огляд

- **Розділ 1: Встановлення та налаштування** займається встановленням основного сервера. Загалом, правильний спосіб створити Incus у виробництві — мати основний сервер і сервер знімків.
- **Розділ 2: Налаштування ZFS** стосується налаштування та нконфігурування ZFS. ZFS — це диспетчер логічних томів і файлова система з відкритим вихідним кодом, створена Sun Microsystems спочатку для своєї операційної системи Solaris.
- **Глава 3: Ініціалізація Incus і налаштування користувача** стосується базової ініціалізації та параметрів, а також налаштування непривілейованого користувача, яким ви будете користуватися протягом більшої частини решти процесу
- **Розділ 4: Налаштування брандмауера** Містить параметри налаштування `firewalld`
- **Розділ 5: Налаштування образів і керування ними** описує процес інсталяції образів операційної системи до контейнера та їх налаштування
- **Глава 6: Профілі** присвячена додаванню профілів і застосуванню їх до контейнерів, зокрема охоплює `macvlan` і його важливість для IP-адресації у вашій LAN або WAN
- **Глава 7: Параметри конфігурації контейнера** коротко описує деякі основні параметри конфігурації для контейнерів і пропонує деякі переваги та побічні ефекти для зміни параметрів конфігурації
- **Глава 8: Знімки контейнерів** детально описує процес створення знімків для контейнерів на основному сервері
- **Розділ 9. Сервер знімків** охоплює налаштування та конфігурацію сервера знімків, а також те, як створити симбіотичний зв’язок між основним і сервером знімків
- **Розділ 10: Автоматизація миттєвих знімків** розповідає про автоматизацію створення миттєвих знімків і заповнення миттєвими знімками сервера миттєвих знімків.
- **Додаток A: налаштування робочої станції** технічно не є частиною документів робочого сервера. Він пропонує рішення для людей, які хочуть створити лабораторію з контейнерів Incus на своїх ноутбуках або робочих станціях.

## Висновки

Ви можете використовувати ці розділи, щоб ефективно налаштувати пару серверів Incus основного та моментального знімків на рівні підприємства. У процесі ви дізнаєтеся багато нового про Incus. Просто майте на увазі, що ще багато чого потрібно дізнатися, і розглядайте ці документи як відправну точку.

Найсуттєвіша перевага Incus полягає в тому, що він економічний у використанні на сервері, дозволяє швидко прискорювати встановлення операційної системи, дозволяє працювати багатьом автономним серверам додатків на одному апаратному забезпеченні, використовуючи це обладнання для максимального використання.
