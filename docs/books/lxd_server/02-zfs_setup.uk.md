---
title: 2 Налаштування ZFS
author: Steven Spencer
contributors: Ezequiel Bruni
tested with: 8.5, 8.6, 9.0
tags:
  - lxd
  - enterprise
  - lxd zfs
---

# Розділ 2: Налаштування ZFS

У цьому розділі вам потрібно буде бути користувачем root або вміти використовувати `sudo`, щоб стати root.

Якщо ви вже інсталювали ZFS, цей розділ проведе вас через налаштування ZFS.

## Увімкнення ZFS і налаштування пулу

Спочатку введіть цю команду:

```
/sbin/modprobe zfs
```

Це не повинно повертати помилку, воно має просто повернутися до командного рядка після завершення. Якщо ви отримали помилку, зупиніться зараз і почніть усунення несправностей. Знову ж таки, переконайтеся, що безпечне завантаження вимкнено.

Далі нам потрібно поглянути на диски в нашій системі, визначити, яка на них завантажена ОС і що можна використовувати для пулу ZFS. Ми зробимо це за допомогою _lsblk_:

```
lsblk
```

Що має повернути щось на зразок цього (ваша система буде іншою!):

```
AME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
loop0    7:0    0  32.3M  1 loop /var/lib/snapd/snap/snapd/11588
loop1    7:1    0  55.5M  1 loop /var/lib/snapd/snap/core18/1997
loop2    7:2    0  68.8M  1 loop /var/lib/snapd/snap/lxd/20037
sda      8:0    0 119.2G  0 disk
├─sda1   8:1    0   600M  0 part /boot/efi
├─sda2   8:2    0     1G  0 part /boot
├─sda3   8:3    0  11.9G  0 part [SWAP]
├─sda4   8:4    0     2G  0 part /home
└─sda5   8:5    0 103.7G  0 part /
sdb      8:16   0 119.2G  0 disk
├─sdb1   8:17   0 119.2G  0 part
└─sdb9   8:25   0     8M  0 part
sdc      8:32   0 149.1G  0 disk
└─sdc1   8:33   0 149.1G  0 part
```

У цьому списку ми бачимо, що */dev/sda* використовується операційною системою, тому ми будемо використовувати * /dev/sdb* для нашого zpool. Зверніть увагу: якщо у вас є кілька вільних жорстких дисків, ви можете розглянути можливість використання raidz (програмний рейд спеціально для ZFS).

Це виходить за рамки цього документа, але безперечно має бути розглянуто для виробництва, оскільки забезпечує кращу продуктивність і резервування. Наразі давайте створимо наш пул на одному пристрої, який ми визначили:

```
zpool create storage /dev/sdb
```

Це означає створити пул під назвою «сховище», тобто ZFS, на пристрої */dev/sdb*.

Після створення пулу доцільно знову перезавантажити сервер на цьому етапі.
