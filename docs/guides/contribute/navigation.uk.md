---
title: Зміни у навігації
author: Steven Spencer
contributors: Ezequiel Bruni, Ganna Zhyrnova
tags:
  - contribute
  - навігація
---

# Навігаційні зміни – документ процесу для менеджерів або редакторів

## Підстава для цього документа

Коли розпочався проект документації, сподівалися, що меню в Mkdocs будуть максимально автоматичними, що зробить редагування ручної навігації рідкістю. Після кількох місяців генерування документів стало зрозуміло, що просто розмістити документи у правильній папці та дозволити Mkdocs розробити навігацію, щоб зберегти речі чистими та акуратними, не можна покладатися. Нам потрібні були категорії, які Mkdocs не надає, якщо документи не знаходяться в певних папках. Тоді Mkdocs створить навігацію за алфавітним сортуванням. Однак створення структури папок, яка виправляє навігацію, — це ще не все. Навіть для цього іноді знадобляться додаткові зміни, щоб зберегти порядок. Наприклад, використання великих літер без зміни структури папок у нижньому регістрі.

## Цілі

Нашими цілями були:

- Створення потрібної структури папок зараз (у майбутньому можуть знадобитися нові папки).
- Налаштувати навігацію так, щоб області Rocky Installation, Migration і Contribution були вгорі
- Налаштувати навігацію, щоб краще назвати деякі папки, і увімкнути правильне використання великих літер. Як приклад, «DNS» і «File Sharing Services» інакше відображаються як «Dns» і «File sharing» без будь-яких маніпуляцій.
- Переконатися, що ці навігаційні файли доступні тільки менеджерам і редакторам.

Цей останній пункт може здатися деяким читачам непотрібним, але він стане більш очевидним, коли цей документ продовжиться.

## Припущення

Передбачається, що у вас є локальний клон репозиторію Rocky GitHub: <https://github.com/rocky-linux/documentation>.

## Зміни середовища

З цими змінами виникає справжня потреба «побачити», як будь-які зміни, які ви вносите, впливають на вміст у контексті веб-сайту, _ПЕРЕД_, як цей вміст буде закріплено в сховищі документів, а згодом стане «активним».

MkDocs — це застосунок на [Python](https://www.python.org), а додаткові пакети, які він використовує, також є кодом Python, тобто середовище, необхідне для запуску MkDocs, має бути **правильно налаштованим середовищем Python**. Налаштування Python для завдань розробки (а саме те, що робиться під час запуску MkDocs) не є тривіальним завданням, і інструкції щодо цього виходять за рамки цього документа. Деякі міркування:

- Версія Python має бути >= 3.8. Також **будьте особливо обережні та не використовуйте «системну» версію Python комп’ютера, якщо на комп’ютері працює Linux або MacOS**. Наприклад, на момент написання цього документа системною версією Python для MacOS залишається версія 2.7.
- Запуск «віртуального середовища» Python. Під час запуску проекту Python-застосунку та встановлення пакетів, наприклад MkDocs, спільнота Python **настійно рекомендує** [створити ізольоване віртуальне середовище](https://realpython.com/python-virtual-environments-a-primer/) для кожного проекту.
- Використовуйте сучасне IDE (інтегроване середовище розробки), яке добре підтримує Python. Дві популярні IDE, які також мають вбудовану підтримку запуску віртуальних середовищ, це:
  - PyCharm - (доступна безкоштовна версія) провідна IDE для Python <https://www.jetbrains.com/pycharm/>
  - Visual Studio Code - (доступна безкоштовна версія) від Microsoft <https://code.visualstudio.com>

Щоб це зробити ефективно, потрібно:

- Налаштування нового проекту Python, який, в ідеалі, використовує віртуальне середовище (вище).
- Встановлення `mkdocs`
- Встановлення деяких плагінів python
- Клонування цього репозиторію Rocky GitHub: <https://github.com/rocky-linux/docs.rockylinux.org>
- Посилання на папку `docs` у вашому клонованому сховищі документації (ви також можете просто змінити файл mkdocs.yml, якщо хочете завантажити правильну папку, але зв’язування зробить ваше середовище mkdocs чистішим)
- Запуск `mkdocs serve` у вашому клоні docs.rockylinux.org

!!! tip

    Ви можете створювати окремі середовища для `mkdocs`, використовуючи будь-яку з процедур у розділі «Локальна документація» меню «Внести свій внесок».

!!! Note "Примітка"

    ```
    Цей документ було написано в середовищі Linux. Якщо ваше середовище інше (Windows або Mac), вам потрібно буде дослідити відповідність деяких із цих кроків. Редактор або менеджер, який читає це, може внести до нього зміни, щоб додати кроки для цих середовищ.
    ```

### Встановлення

- Встановіть `mkdocs` у середовищі python: `pip install mkdocs`
- Встановіть необхідні плагіни: `pip install mkdocs-material mkdocs-localsearch mkdocs-awesome-pages-plugin mkdocs-redirects mkdocs-i18n`
- Клонувати репозиторій (зазначено вище)

### Приєднання та запуск `mkdocs`

У вашому локальному файлі docs.rockylinux.org (клоні) виконайте наступне. Це передбачає розташування вашого клону документації, тому змініть за потреби:

`ln -s /home/username/documentation/docs docs`

Знову ж таки, ви можете змінити локальну копію файлу `mkdocs.yml`, щоб встановити шлях. Якщо ви використовуєте цей метод, вам потрібно змінити цей рядок, щоб він вказував на вашу папку `documentation/docs`:

```text
docs_dir: 'docs/docs'
```

Після завершення ви можете спробувати запустити `mkdocs serve`, щоб побачити, чи отримаєте ви бажаний контент. Це буде працювати на вашому локальному хості на порту 8000; наприклад: <http://127.0.0.1:8000/>

## Навігація та інші зміни

Mkdocs обробляє навігацію за допомогою файлів `.pages` за допомогою **АБО** значення мета-тегу "title:" у вступній частині документа. Файли `.pages` не надто складні, АЛЕ якщо щось пропустити, це може призвести до збою завантаження сервера. Ось чому ця процедура **ЛИШЕ** для менеджерів та редакторів. Ці особи матимуть інструменти (локальне встановлення mkdocs, а також клони документації та docs.rockylinux.org), щоб щось, передане та об’єднане з GitHub, не порушувало обслуговування веб-сайту документації. Не можна очікувати, що учасник відповідатиме хоча б одній із цих вимог.

### Файли `.pages`

Як уже зазначалося, файли `.pages` загалом досить прості. Вони являють собою файл у форматі YAML, який `mkdocs` зчитує перед відображенням вмісту. Щоб побачити один із складніших файлів `.pages`, розглянемо той, що створений для форматування бічної навігації:

```yaml
---
nav:
    - ... | index*.md
    - ... | installation*.md
    - ... | migrate2rocky*.md
    - Contribute: contribute
    - Automation: automation
    - Backup & Sync: backup
    - Content Management: cms
    - Communications: communications
    - Containers: containers
    - Database: database
    - Desktop: desktop
    - DNS: dns
    - Email: email
    - File Sharing Services: file_sharing
    - Git: git
    - Interoperability: interoperability
    - Mirror Management: mirror_management
    - Network: network
    - Package Management: package_management
    - ...
```

Тут `index*.md` показує сторінку "Guides Home:", `installation*.md` показує посилання на документ "Installing Rocky Linux", а `migrate2rocky*.md` показує посилання на документ "Migrating To Rocky Linux". Символ `*` у кожному посиланні дозволяє, щоб документ був будь-якою мовою, наприклад, `index.fr.md`, `index.de.md` тощо. Нарешті, розміщення "Внести свій внесок" знаходиться під цими елементами, а не в звичайному (алфавітному) порядку сортування. Переглядаючи список, ви можете побачити, що робить кожен елемент. Зауважте, що після запису «Керування пакетами: package_management» є ще дві папки (безпека та веб). Вони не потребують додаткового форматування. Файл `.pages` повідомляє `mkdocs` про необхідність їх звичайного завантаження за допомогою `- ...`.

Ви також можете використовувати форматування YAML у реальному файлі. Причиною для цього може бути те, що початковий заголовок файлу такий довгий, що він просто погано відображається в розділі навігації. Як приклад, візьмемо цей документ під заголовком "# `mod_ssl` на Rocky Linux у середовищі веб-сервера Apache з httpd". Це дуже довго. Він дуже погано відображається на бічній панелі навігації, коли відкрито навігаційний елемент «Інтернет». Щоб виправити це, ви можете спільно з автором змінити його заголовок або змінити спосіб його відображення в меню, додавши заголовок перед заголовком усередині документа. У цьому прикладі додавання заголовка до основного матеріалу скорочує довжину заголовка в списку:

```text
---
title: Apache With `mod_ssl`
---
```

Це змінює назву щодо навігації, але залишає оригінальну назву автора в документі.

!!! info

    У більшості випадків заголовок автора буде заголовком рівня 1, а головна частина заголовка ТАКОЖ буде заголовком рівня 1 («#»). Це створює помилку розцінки в документі. Щоб уникнути цього, або повністю видаліть назву автора, або змініть її на заголовок рівня 2 ("##").

Ви повинні економно використовувати файли `.pages` лише за потреби.

## Висновок

Хоча внесення необхідних змін у навігацію з файлами `.pages` нескладне, існує потенціал для порушення роботи документації. З цієї причини лише менеджери та редактори з відповідними інструментами повинні мати дозвіл на редагування цих файлів. Наявність повного доступного середовища для перегляду того, що відображаються на живих веб-сторінках, утримує менеджера чи редактора від помилок під час редагування цих файлів.
