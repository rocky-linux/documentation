---
title: Перехід до нових зображень Azure
author: Neil Hanlon
contributors: Steven Spencer, Ganna Zhyrnova
tags:
  - cloud
  - azure
  - microsoft azure
  - знецінення
---

!!! info «Старі зображення облікових записів публікації припинено у квітні 2024 року»

```
Публікаційний обліковий запис Microsoft – це обліковий запис Azure Marketplace, який дозволяє розробникам публікувати свої пропозиції в Microsoft AppSource або Azure Marketplace.
RESF надає зображення віртуальної машини Rocky Linux за двома окремими обліковими записами публікації в Azure: застарілим обліковим записом, ідентифікованим як `erockyenterprisesoftwarefoundationinc1653071250513`, і новішим офіційним обліковим записом під назвою `resf`.
Зображення, опубліковані під застарілим обліковим записом публікації (`erockyenterprisesoftwarefoundationinc1653071250513`), було позначено як припинення підтримки 23 квітня 2024 року з вікном у 180 днів (6 місяців), доки їх більше не можна буде використовувати.

Щоб продовжити використовувати Rocky Linux на Azure, ви повинні дотримуватися цього посібника, щоб перейти до нового облікового запису публікації (`resf`) або до нових зображень спільноти Galleries.
```

# Посібник з міграції: перехід на нові образи Rocky Linux на Azure

У цьому посібнику наведено детальні кроки для міграції ваших віртуальних машин (ВМ) Azure із застарілих образів Rocky Linux до нових зображень під обліковим записом видавця `resf` або за допомогою галерей спільноти. Дотримання цього посібника забезпечить плавний перехід із мінімальними перешкодами.

## Перш ніж почати

- Переконайтеся, що у вас є поточна резервна копія віртуальної машини. Хоча процес міграції не повинен вплинути на ваші дані, створення резервної копії є найкращою практикою для будь-яких системних змін.
- Переконайтеся, що ви маєте необхідні дозволи для створення нових віртуальних машин і керування існуючими в обліковому записі Azure.

## Крок 1. Знайдіть існуючі віртуальні машини

Визначте віртуальні машини, розгорнуті зі старими образами Rocky Linux. Це можна зробити, відфільтрувавши віртуальні машини за старим іменем облікового запису видавця:

```text
erockyenterprisesoftwarefoundationinc1653071250513`
```

## Крок 2. Підготуйте нову віртуальну машину

1. **Перейдіть** до Azure Marketplace.
2. **Шукайте** нові зображення Rocky Linux під обліковим записом видавця `resf` або перейдіть до Галереї спільноти.
   - Поточні посилання на Marketplace:
     - [Rocky Linux x86_64](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/resf.rockylinux-x86_64)
   - [Rocky Linux aarch64](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/resf.rockylinux-aarch64)
   - Повні інструкції щодо доступу до зображень спільнотної галереї можна знайти в цій [повідомленні новин](https://rockylinux.org/news/rocky-on-azure-community-gallery/)
3. **Виберіть** потрібну версію Rocky Linux і **створіть нову віртуальну машину**. Під час налаштування ви можете вибрати той самий розмір віртуальної машини та інші конфігурації, що й ваша існуюча віртуальна машина, щоб забезпечити сумісність.

## Крок 3: Передайте дані

### Варіант A: використання дисків, керованих Azure (рекомендовано для спрощення)

1. **Зупиніть** наявну ВМ.
2. **Від’єднайте** диск операційної системи від існуючої віртуальної машини.
3. **Приєднайте** від’єднаний диск до нової віртуальної машини як диск даних.
4. **Завантажте** вашу нову віртуальну машину. Якщо потрібно, ви можете підключити старий диск ОС і скопіювати дані на новий диск.

### Варіант Б: використання інструментів передачі даних (для складних середовищ або особливих потреб)

1. **Виберіть** засіб передачі даних, наприклад `rsync` або Azure Blob Storage для передачі даних.
2. **Перенесіть** дані зі старої віртуальної машини на нову. Це може включати дані програми, конфігурації та дані користувача.

```bash
# Приклад команди rsync
rsync -avzh /path/to/old_VM_data/ user@new_VM_IP:/path/to/new_VM_destination/
```

## Крок 4. Переналаштуйте нову віртуальну машину

1. **Повторно застосуйте** будь-які спеціальні конфігурації або адаптації, які ви мали на старій віртуальній машині, до нової віртуальної машини, переконавшись, що вона відповідає запланованим налаштуванням середовища.
2. **Протестуйте** нову віртуальну машину, щоб переконатися, що програми та служби працюють належним чином.

## Крок 5. Оновіть записи DNS (якщо є)

Якщо ви отримуєте доступ до своєї віртуальної машини через певний домен, вам потрібно оновити записи DNS, щоб вони вказували на IP-адресу нової віртуальної машини.

## Крок 6. Виведіть стару віртуальну машину з експлуатації

Після того, як ви переконалися, що нова віртуальна машина працює правильно, і перемістили всі необхідні дані та конфігурації, ви можете **звільнити та видалити** стару віртуальну машину.

## Останні кроки

- Перевірте, чи всі служби на новій віртуальній машині працюють належним чином.
- Слідкуйте за продуктивністю та справністю нової віртуальної машини, щоб переконатися, що вона відповідає вашим потребам.

## Підтримка

Підтримка доступна, якщо у вас виникнуть проблеми під час міграції або у вас виникнуть запитання. Щоб отримати допомогу, відвідайте [канали підтримки Rocky Linux](https://wiki.rockylinux.org/rocky/support/).
