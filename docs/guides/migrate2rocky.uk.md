---
title: Перехід (міграція) на Rocky Linux
author: Ezequiel Bruni
contributors: tianci li, Steven Spencer, Ganna Zhyrnova
update: 23.11.2021
---

# Як перейти на Rocky Linux із CentOS Stream, CentOS, AlmaLinux, RHEL або Oracle Linux

## Передумови і Припущення

* CentOS Stream, CentOS, AlmaLinux, RHEL або Oracle Linux, які працюють на апаратному сервері або VPS. Non-Stream CentOS завис на версії 8.5. Поточна підтримувана версія інших систем – 8.9 або 9.3.
* Практичні знання командного рядка.
* Практичні знання SSH для віддалених машин.
* Помірно ризиковане ставлення.
* Виконання команд від імені root. Або увійдіть як root, або отримайте можливість підвищити привілеї за допомогою `sudo`.

## Вступ

У цьому посібнику ви дізнаєтеся, як конвертувати всі вищезазначені ОС у повнофункціональну установку Rocky Linux. Це, мабуть, один із найбільш обхідних способів інсталяції Rocky Linux, але він буде корисний людям у різних ситуаціях.

Наприклад, деякі постачальники серверів деякий час не підтримуватимуть Rocky Linux за замовчуванням. Або у вас може бути робочий сервер, який ви хочете перетворити на Rocky Linux, не перевстановлюючи все.

Що ж, у нас є інструмент для вас: [migrate2rocky](https://github.com/rocky-linux/rocky-tools/tree/main/migrate2rocky).

Це сценарій, який під час виконання змінить усі ваші сховища на репозиторії Rocky Linux. Пакети будуть встановлені та оновлені/понижені за потреби, а також зміниться брендинг вашої ОС.

Не хвилюйтеся, якщо ви новачок у системному адмініструванні; я зроблю це максимально зручним для користувача. Що ж, це так само зручно, як і командний рядок.

### Застереження та попередження

1. Перегляньте сторінку README migrate2rocky (посилання на яку наведено вище), оскільки існує відома суперечність між сценарієм і сховищами Katello. З часом ми, ймовірно, виявимо (і, зрештою, виправимо) більше зіткнень і несумісностей, тож ви захочете знати про це, особливо для робочих серверів.
2. Найвірогідніше, що цей сценарій працюватиме без інцидентів при повністю свіжих встановленнях. _Якщо ви хочете перетворити робочий сервер, заради всього святого й доброго, **зробіть резервну копію даних і знімок системи або зробіть спочатку в середовищі для демонстрації.**_

Ви готові?

## Підготуйте свій сервер

Вам потрібно буде взяти фактичний файл сценарію зі сховища. Це можна зробити кількома способами.

### Ручний спосіб

Завантажте стислі файли з GitHub і розпакуйте потрібний (це буде *migrate2rocky.sh* або *migrate2rocky9.sh*). Ви можете знайти zip-файли для будь-якого сховища GitHub у правій частині головної сторінки сховища:

![Кнопка "Download Zip"](images/migrate2rocky-github-zip.png)

Потім завантажте виконуваний файл на свій сервер за допомогою SSH, виконавши цю команду на локальному комп’ютері (примітка: якщо ви використовуєте систему 9.x, додайте 9 перед `.sh`):

```
scp PATH/TO/FILE/migrate2rocky.sh root@yourdomain.com:/home/
```

Просто, знаєте, налаштуйте всі шляхи до файлів і домени серверів або IP-адреси за потреби.

### Спосіб `git`

Встановіть `git` на свій сервер за допомогою:

```
dnf install git
```

Потім клонуйте репозиторій rocky-tools за допомогою:

```
git clone https://github.com/rocky-linux/rocky-tools.git
```

Примітка: цей метод завантажить усі сценарії та файли в репозиторії rocky-tools.

### Легкий спосіб

Це, мабуть, найпростіший спосіб отримати сценарій. Вам потрібен лише відповідний клієнт HTTP (`curl`, `wget`, `lynx` тощо), встановлений на сервері.

Якщо у вас встановлено утиліту `curl`, запустіть цю команду, щоб завантажити сценарій у будь-який каталог, який ви використовуєте (примітка: якщо ви використовуєте систему 9.x, додайте 9 перед `.sh`):

```
curl https://raw.githubusercontent.com/rocky-linux/rocky-tools/main/migrate2rocky/migrate2rocky.sh -o migrate2rocky.sh
```

Ця команда завантажить файл прямо на ваш сервер і *лише* той файл, який ви хочете. Але знову ж таки, проблеми безпеки свідчать про те, що це не обов’язково найкраща практика, тому майте це на увазі.

## Скрипти виконання та встановлення

Використовуйте команду `cd`, щоб перейти до каталогу, де знаходиться сценарій, переконайтеся, що файл є виконуваним, і надайте власнику файлу сценарію дозволи x (примітка: у наведених нижче командах, якщо ви запускаєте система 9.x, додайте 9 перед `.sh`).

```
chmod u+x migrate2rocky.sh
```

А тепер, нарешті, виконайте сценарій:

```
./migrate2rocky.sh -r
```

Ця опція «-r» повідомляє сценарію продовжити та встановити все.

Якщо ви все зробили правильно, вікно вашого терміналу має виглядати приблизно так:

![успішний запуск скрипта](images/migrate2rocky-convert-01.png)

Тепер сценарію знадобиться деякий час, щоб перетворити все, залежно від фактичної машини/сервера та підключення до широкого Інтернету.

Якщо в кінці ви бачите повідомлення **Complete!**, це означає, що все в порядку, і ви можете перезапустити сервер.

![повідомлення про успішну міграцію ОС](images/migrate2rocky-convert-02.png)

Дайте трохи часу, увійдіть знову, і ви матимете чудовий новий сервер Rocky Linux. Виконайте команду `hostnamectl`, щоб перевірити, чи ваша ОС переміщена належним чином і все в порядку.

![Результати виконання команди hostnamectl](images/migrate2rocky-convert-03.png)
