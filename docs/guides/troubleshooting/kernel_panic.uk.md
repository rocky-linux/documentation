---
title: Як впоратися з панікою ядра (kernel panic)
author: Antoine Le Morvan
contributors: Steven Spencer
tested_with: 9.4
tags:
  - kernel
  - kernel panic
  - порятунок
---

## Вступ

Іноді інсталяція ядра йде не так, і вам доводиться повертатися назад.

Для цього може бути багато причин, наприклад, недостатньо місця в розділі `/boot`, перерва в установці або проблема з програмою третьої сторони.

На щастя для нас, ми завжди можемо щось зробити, щоб врятувати ситуацію.

## Спробуйте перезавантажитися з попереднім ядром

Перше, що потрібно спробувати, це перезавантажити з попереднім ядром.

- Перезапустіть систему.
- Коли ви досягнете екрана завантаження GRUB 2, перемістіть вибір до пункту меню, що відповідає попередньому ядру, і натисніть клавішу `enter`.

Після перезавантаження системи її можна відновити.

Якщо система не завантажується, спробуйте **режим відновлення** (див. вище).

## Видаліть несправне ядро

Найпростіший спосіб зробити це — видалити версію ядра, яка не працює, а потім перевстановити її.

!!! Note "Примітка"

````
Ви не можете видалити ядро, яке ви використовуєте. 

Щоб показати версію поточного ядра: 

```bash
uname -r
```
````

Щоб перевірити список встановлених ядер:

```bash
dnf list installed kernel\* | sort -V
```

Але наступна команда, можливо, більш практична, оскільки вона повертає лише пакунки з кількома встановленими версіями:

```bash
dnf repoquery --installed --installonly
```

Щоб видалити певне ядро, ви можете використати `dnf`, вказавши версію ядра, яку ви отримали раніше:

```bash
dnf remove kernel-core-<version>
```

Приклад:

```bash
dnf remove kernel-5.14.0-427.20.1.el9_4.x86_64
```

або скористайтеся командою `dnf repoquery`:

```bash
dnf remove $(dnf repoquery --installed --installonly --latest=1)
```

Тепер ви можете оновити свою систему та спробувати перевстановити останню версію ядра.

```bash
dnf update
```

Перезавантажте та подивіться, чи працює нове ядро ​​цього разу.

## Режим порятунку

Режим відновлення відповідає старому режиму для одного користувача.

!!! Note "Примітка"

```
Щоб увійти в режим порятунку, вам потрібно вказати пароль root.
```

Щоб увійти в режим відновлення, найпростіший спосіб — вибрати рядок, який починається з `0-rescue-*` в меню grub.

Інший спосіб — відредагувати будь-який рядок меню grub (натиснувши клавішу «e») і додати `systemd.unit=rescue.target` у кінці рядка, який починається з `linux`, а потім натиснути `ctrl+x` щоб завантажити систему в режим відновлення.

!!! Note "Примітка"

```
Ви перебуваєте в режимі qwerty.
```

Перейшовши в режим відновлення та ввівши пароль адміністратора, можна відновити систему.

Для цього вам може знадобитися налаштувати тимчасову IP-адресу за допомогою `ip ad add ...` (див. розділ про мережу нашого посібника адміністратора).

## Останній шанс: Anaconda Rescue Mode

Якщо жоден із наведених вище методів не працює, ви все одно можете завантажитися з інсталяційного ISO та відновити систему.

Ця документація не охоплює цей метод.

## Обслуговування системи

### Очищення старих версій ядра

Ви можете видалити старі встановлені пакети ядра, зберігши лише останню версію та версію запущеного ядра:

```bash
dnf remove --oldinstallonly
```

### Обмеження кількості встановлених версій ядра

Ми можемо обмежити кількість версій ядра, відредагувавши файл `/etc/yum.conf` і встановивши змінну **installonly_limit**:

```text
installonly_limit=3
```

!!! Note "Примітка"

```
Ви завжди повинні мати принаймні останню версію ядра та резервну версію.
```
