- - -
назва: dnf - команда обміну автор: wale soyinka учасники: Дата: 2023-01-24 теги:
  - хмарні зображення
  - контейнери
  - dnf
  - dnf swap
  - vim
  - vim-minimal
  - дозвіл стирання
  - coreutils-single
- - -


# Вступ

Для того, щоб зображення контейнерів і хмарних зображень були якомога меншими, розповсюджувачі та пакувальники іноді можуть надсилати скорочені версії популярних пакунків. Прикладами скорочених пакетів, укомплектованих зображеннями контейнерів або хмар, є **vim-minimal, curl-minimal, coreutils-single** тощо.

Хоча деякі пакети, що постачаються, є скороченими версіями, вони часто цілком прийнятні для більшості випадків використання.

У випадках, коли скороченого пакета недостатньо, ви можете використати команду `dnf swap`, щоб швидко замінити мінімальний пакет на звичайний пакет.

## Мета

Цей GEMstone для Rocky Linux демонструє, як використовувати **dnf** для _заміни_ пакета `vim-minimal`, що входить до комплекту, на звичайний пакет `vim`.

## Перевірте існуючий варіант `vim`

Увійшовши в середовище свого контейнера або віртуальної машини як користувач із правами адміністратора, спочатку перевірте, чи встановлено варіант пакета `vim`. Впишіть:

```bash
# rpm -qa | grep  ^vim
vim-minimal-9.1.083-5.el10_0.1.x86_64
```

У нашій системі встановлено `vim-minimal`.

## Замініть `vim-minimal` на `vim`

Використайте `dnf`, щоб замінити встановлений пакет `vim-minimal` на звичайний пакет `vim`.

```bash
# dnf -y swap vim-minimal vim
```

## Перевірте новий варіант пакета `vim`

Щоб підтвердити зміни, знову запитайте базу даних rpm щодо встановлених пакетів `vim`, виконавши команду:

```bash
# rpm -qa | grep  ^vim
vim-enhanced-9.1.083-5.el10_0.1.x86_64
```

І це GEM!

## Примітки

Команда обміну DNF

**Синтаксис**:

```bash
dnf [options] swap <package-to-be-removed> <replacement-package>
```

Під капотом `dnf swap` використовує параметр DNF `--allowerasing` для вирішення будь-яких конфліктів пакунків. Таким чином, приклад `vim-minimal`, продемонстрований у цьому GEMstone, також можна було б виконати, виконавши команду:

```bash
dnf install -y --allowerasing vim
```
