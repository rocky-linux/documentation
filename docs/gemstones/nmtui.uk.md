---
title: nmtui - інструмент керування мережею
author: tianci li
contributors: Steven Spencer, Neil Hanlon
update: 2021-10-23
---

# Вступ

Користувачам-початківцям, які вперше знайомляться з GNU/Linux, перше, що слід розглянути, це як підключити машину до Інтернету після встановлення операційної системи. Ця стаття розповість вам, як налаштувати IP-адресу, маску підмережі, шлюз і DNS. Є кілька способів довідки. Незалежно від того, новачок ви чи знайомий, я вважаю, що ви зможете швидко почати.

## nmtui

`NetworkManager` — це стандартний набір інструментів конфігурації мережі Linux, який підтримує серверне та настільне середовище. Зараз більшість популярних дистрибутивів підтримують його. Цей набір інструментів налаштування мережі підходить для Rocky Linux 8 і новіших версій. Якщо ви бажаєте налаштувати інформацію про мережу графічно (тобто командний рядок `nmtui`), вам потрібно зробити лише це:

```bash
shell > dnf -y install NetworkManager NetworkManager-tui
shell > nmtui
```

| NetworkManager TUI            |          |
| ----------------------------- | -------- |
| Редагувати підключення        |          |
| Активувати підключення        |          |
| Встановити ім'я хоста системи |          |
| Вийти                         |          |
|                               | \<OK\> |

Для вибору можна скористатися клавішею <kbd>Tab</kbd> або <kbd>↑</kbd><kbd>↓</kbd><kbd>←</kbd><kbd>→</kbd> якщо ви хочете змінити інформацію про мережу, виберіть **Редагувати підключення**, а потім натисніть <kbd>Enter</kbd>. Виберіть іншу мережеву карту та виберіть **Редагувати..** для редагування.

### DHCP IPv4

Для IPv4, якщо потрібно отримати інформацію про мережу за допомогою DHCP, вам потрібно лише вибрати *IPv4 CONFIGURATION* **&lt;Automatic&gt;** і запустіть у своєму терміналі `systemctl restart NetworkManager.service`. У рідкісних випадках потрібно змінити мережеву карту, щоб вона почала діяти. Наприклад, таким чином: `nmcli connection down ens33`, `nmcli connection up ens33` Наприклад: `nmcli connection down ens33`, `nmcli connection up ens33`


### Виправити вручну інформацію про мережу

Якщо ви хочете вручну виправити всю інформацію про мережу IPv4, вам потрібно вибрати **&lt;Manual&gt;** після *IPv4 CONFIGURATION* і додайте його рядок за рядком. Наприклад, мені подобається таке:

| Елемент     | Значення         |
| ----------- | ---------------- |
| Адреси      | 192.168.100.4/24 |
| Шлюз        | 192.168.100.1    |
| DNS сервери | 8.8.8.8          |

Потім натисніть \< OK \>, крок за кроком поверніться до інтерфейсу терміналу та виконайте `systemctl restart NetworkManager.service`. Подібним чином у рідкісних випадках мережеву карту потрібно вмикати та вимикати, щоб вона почала діяти.

## Змінити спосіб конфігураційних файлів

Усі дистрибутиви RHEL <font color="red">7.x</font> або <font color="red">8.x</font> налаштовані однаково. Файл конфігурації інформації про мережу зберігається в каталозі **/etc/sysconfig/network-scripts/**, і одна мережева карта відповідає одному файлу конфігурації. Файл конфігурації має багато параметрів, як показано в наступній таблиці. Зверніть увагу! Параметри повинні бути написані великими літерами.

!!! warning "Важливо"

    У дистрибутивах RHEL 9.x місце розташування каталогу, де зберігається файл конфігурації мережевої карти, було змінено, тобто **/etc/NetworkManager/system-connections/**. Дивіться [тут](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_managing_networking/index) для отримання додаткової інформації.

```bash
shell > ls /etc/sysconfig/network-scripts/
ifcfg-ens33
```

| Назва параметра      | Значення                                                                                                                                                                                                           | Приклад                             |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------- |
| DEVICE               | Назва системного логічного пристрою                                                                                                                                                                                | DEVICE=ens33                        |
| ONBOOT               | Ви можете вибрати, чи мережева карта запускається автоматично разом із системою, чи ні                                                                                                                             | ONBOOT=yes                          |
| TYPE                 | Тип інтерфейсу мережевої карти, зазвичай Ethernet                                                                                                                                                                  | TYPE=Ethernet                       |
| BOOTPROTO            | Спосіб отримання ip, це може бути динамічне отримання DHCP або статичне ручне налаштування за допомогою static                                                                                                     | BOOTPROTO=static                    |
| IPADDR               | IP-адреса мережевої карти, коли BOOTPROTO=static, цей параметр вступає в силу                                                                                                                                      | IPADDR=192.168.100.4                |
| HWADDR               | Апаратна адреса, тобто MAC-адреса                                                                                                                                                                                  | HWADDR=00:0C:29:84:F6:9C            |
| NETMASK              | Десяткова маска підмережі                                                                                                                                                                                          | NETMASK=255.255.255.0               |
| PREFIX               | Маска підмережі, представлена цифрами                                                                                                                                                                              | PREFIX=24                           |
| GATEWAY              | Якщо є кілька мережевих карт, цей параметр може з’явитися лише один раз                                                                                                                                            | GATEWAY=192.168.100.1               |
| PEERDNS              | Якщо значення yes, параметри DNS, визначені тут, змінять /etc/resolv.conf; якщо значення no, /etc/resolv.conf не буде змінено. Під час використання DHCP за замовчуванням встановлено yes                          | PEERDNS=yes                         |
| DNS1                 | Вибрано основний DNS, він набуває чинності, лише якщо PEERDNS=no                                                                                                                                                   | DNS1=8.8.8.8                        |
| DNS2                 | Альтернативний DNS, ефективний лише тоді, коли PEERDNS=ні                                                                                                                                                          | DNS2=114.114.114.114                |
| BROWSER_ONLY         | Чи дозволяти лише браузери                                                                                                                                                                                         | BROWSER_ONLY=no                     |
| USERCTL              | Чи дозволено звичайним користувачам керувати пристроєм мережевої карти, yes означає дозволено, no означає заборонено                                                                                               | USERCTL=no                          |
| UUID                 | Універсальний унікальний ідентифікаційний код, основна функція - ідентифікація апаратного забезпечення, загалом заповнювати його не потрібно                                                                       |                                     |
| PROXY_METHOD         | Метод проксі, зазвичай немає, можна залишити порожнім                                                                                                                                                              |                                     |
| IPV4_FAILURE_FATAL | Якщо yes, це означає, що пристрій буде вимкнено після помилки налаштування ipv4; якщо no, це означає, що його не буде вимкнено.                                                                                    | IPV4_FAILURE_FATAL=no             |
| IPV6INIT             | Чи вмикати IPV6, yes, щоб увімкнути, no, щоб не ввімкнути. Якщо IPV6INIT=yes, можна також увімкнути два параметри IPV6ADDR і IPV6_DEFAULTGW. Перший представляє адресу IPV6, а другий представляє призначений шлюз | IPV6INIT=yes                        |
| IPV6_AUTOCONF        | Чи використовувати автоматичне налаштування IPV6, yes означає використання; no означає що не використовуються                                                                                                      | IPV6_AUTOCONF=yes                   |
| IPV6_DEFROUTE        | Чи вказувати IPV6 як маршрут за замовчуванням                                                                                                                                                                      | IPV6_DEFROUTE=yes                   |
| IPV6_FAILURE_FATAL | Після помилки налаштування IPV6, чи вимкнути пристрій                                                                                                                                                              | IPV6_FAILURE_FATAL=no             |
| IPV6_ADDR_GEN_MODE | Створіть модель адреси IPV6, необов’язкові значення stable-privacy і eui64                                                                                                                                         | IPV6_ADDR_GEN_MODE=stable-privacy |

Після успішної зміни файлу конфігурації не забудьте перезапустити службу мережевої карти `systemctl restart NetworkManager.service`.

### Рекомендована конфігурація для IPV4

```bash
TYPE=Ethernet
ONBOOT=yes
DEVICE=ens33
USERCTL=no
IPV4_FAILURE_FATAL=no
BROWSER_ONLY=no
BOOTPROTO=static
PEERDNS=no
IPADDR=192.168.100.4
PREFIX=24
GATEWAY=192.168.100.1
DNS1=8.8.8.8
DNS2=114.114.114.114
```

### Рекомендована конфігурація для IPV6

```bash
TYPE=Ethernet
ONBOOT=yes
DEVICE=ens33
USERCTL=no
BROWSER_ONLY=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
```

## Перегляд інформації про мережу

`ip a` або `nmcli device show`
